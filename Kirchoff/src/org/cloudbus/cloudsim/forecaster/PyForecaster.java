package org.cloudbus.cloudsim.forecaster;
//import org.python.core.PyArray;
//import org.python.core.PyObject;
//import org.python.core.PyString;
//import org.python.util.PythonInterpreter;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class PyForecaster {

public static void main(String[] args) throws IOException {
	
	Double load = 0.0;
	try {
	
		//String command = "python pyapp.py 1,2,3,4";
		String command = "/usr/bin/python /home/dion/eclipse-workspace/Rajiv3/bin/org/cloudbus/cloudsim/forecaster/mlp_cloudsim.py 3004.0,2268.0,1734.0,1482.0,1343.0,1528.0,1557.0,1927.0,2096.0,3046.0,3428.0,3111.0,3045.0,3149.0,3220.0,3294.0,3731.0,3056.0,2773.0,3148.0,3449.0,3169.0,2884.0,2832.0,2608.0,1920.0,1472.0,1277.0,1328.0,1268.0,1221.0,1491.0,1902.0,2156.0,2672.0,2938.0,2977.0,3031.0,2735.0,3382.0,3380.0,3240.0,2806.0,2923.0,3401.0,3880.0,3421.0,2969.0,2437.0,2110.0,2084.0,1485.0,1761.0,1822.0,2970.0,3781.0,4743.0,4663.0,4743.0,5653.0,6075.0,5532.0,5479.0,5452.0,4349.0,3378.0,3726.0,3790.0,3738.0,3209.0,3696.0,3210.0,2782.0,2475.0,1892.0,1730.0,1698.0,1695.0,2320.0,3056.0,3148.0,3613.0,3537.0,3458.0,3398.0,3358.0,4324.0,3528.0,3495.0,2921.0,2782.0,2810.0,2775.0,2937.0,3458.0,2467.0,2005.0,1974.0,1990.0,1344.0,1714.0,1903.0,3053.0,3820.0,4740.0,4950.0,6285.0,6223.0,5157.0,7996.0,6857.0,7007.0,4738.0,4281.0,3713.0,3135.0,3204.0,3196.0,2962.0,2527.0,1908.0,1785.0,1595.0,1440.0,1624.0,1870.0,3220.0,4319.0,5007.0,6008.0,6388.0,6583.0,7022.0,6995.0,7004.0,6280.0,5449.0,4689.0,4236.0,3993.0,3537.0,3871.0,3800.0,2453.0,2638.0,2156.0,1516.0,1249.0,1023.0,1166.0,2928.0,5070.0,5670.0,5959.0,6475.0,6747.0,5632.0,5084.0,5978.0,5144.0,4658.0,3053.0,2603.0,2516.0,2559.0,2306.0,2523.0,2510.0,1555.0,999.0,909.0,691.0,788.0,838.0,846.0,1135.0,1455.0,1805.0,1655.0,1664.0,1963.0,2396.0,2054.0,2297.0,2196.0,1911.0,1680.0,1708.0,1834.0,2095.0,1850.0,1391.0,1564.0,1235.0,945.0,641.0,448.0,465.0,517.0,858.0,1206.0,1542.0,1737.0,1946.0,1629.0,1970.0,1942.0,2198.0,1707.0,1794.0,1892.0,2215.0,2246.0,1653.0,1827.0,1691.0,1466.0,1108.0,821.0,874.0,892.0,1332.0,1847.0,3175.0,4061.0,4698.0,4910.0,4757.0,4788.0,5084.0,5459.0,5180.0,3759.0,3225.0,3137.0,2681.0,3094.0,2649.0,2060.0,1812.0,1527.0,1303.0,1183.0,1158.0,1080.0,1548.0,3330.0,3745.0,3844.0,4681.0,4889.0,5700.0,5357.0,6035.0,5707.0,5241.0,4136.0,3656.0,3327.0,2931.0,3239.0,2684.0,2699.0,2317.0,1896.0,1753.0,1437.0,1508.0,1500.0,1951.0,2974.0,4299.0,5254.0,5535.0,6357.0,5834.0,6277.0,6167.0,5399.0,4616.0,4499.0,4274.0,3786.0,4035.0,3722.0,3985.0,3570.0,3276.0,3429.0,2400.0,2512.0,2386.0,2725.0,4862.0,7830.0,13828.0,13722.0,9442.0,9532.0,7149.0,7721.0,7266.0,7645.0,5533.0,4808.0,3811.0,2836.0,3727.0,3221.0,3528.0,3043.0,2119.0,1974.0,2002.0,1438.0,1789.0,1756.0,3059.0,4206.0,4886.0,5310.0,4698.0,4959.0,5625.0,5021.0,5401.0,5105.0,4104.0,3128.0,3258.0,2834.0,2748.0,2975.0,2430.0,1869.0,2023.0,1426.0,1338.0,1040.0,966.0,803.0,1039.0,1208.0,1683.0,2000.0,2118.0,2339.0,2169.0,2694.0,2492.0,2726.0,2386.0,2393.0,2211.0,2193.0,1830.0,2375.0,2258.0,2041.0,2057.0,1191.0,816.0,791.0,590.0,793.0,823.0,1042.0,1522.0,1621.0,1988.0,2396.0,2776.0,2873.0,2682.0,2431.0,2893.0,2631.0,3072.0,2678.0,2927.0,2854.0,2462.0,2043.0,1546.0,1049.0,1114.0,1192.0,940.0,1039.0,2016.0,2828.0,4135.0,4664.0,4702.0,4897.0,5097.0,6354.0,5317.0,5255.0,3927.0,3193.0,2603.0,2694.0,3109.0,2952.0,2406.0,2155.0,1793.0,1586.0,612.0,381.0,467.0,690.0,1452.0,3366.0,3191.0,3506.0,4535.0,4850.0,4796.0,5157.0,5605.0,3767.0,2309.0,3294.0,2668.0,2340.0,2079.0,2513.0,1895.0,1631.0,1683.0,1268.0,1470.0,1150.0,1282.0,1687.0,3243.0,3359.0,4199.0,4710.0,5200.0,4894.0,4763.0,4863.0,5682.0,3598.0,3557.0,2833.0,2968.0,2390.0,2577.0,1852.0,2077.0,1709.0,1765.0,1161.0,1023.0,970.0,868.0,1706.0,2906.0,3322.0,4169.0,4061.0,5108.0,4830.0,4368.0,4837.0,4786.0,4077.0,2623.0,1862.0,2044.0,2059.0,2141.0,2176.0,1897.0,1326.0,1371.0,1097.0,883.0,1161.0,976.0,2018.0,3432.0,4229.0,4173.0,3822.0,4399.0,5658.0,4797.0,4141.0,4106.0,3654.0,2491.0,1855.0,1776.0,2346.0,1827.0,316.0 316.0";
		
		Process process = Runtime.getRuntime().exec(command);
		
		StringBuilder output = new StringBuilder();

		BufferedReader reader = new BufferedReader( new InputStreamReader(process.getInputStream()));

		//System.out.println(reader.readLine());
		
		String line;
		while ((line = reader.readLine()) != null) {
			output.append(line + "\n");
		}

		int exitVal = process.waitFor();
		if (exitVal == 0) {
			//System.out.println("Success!");
			System.out.println(output);
			//output.substring(start, end)
			String str = output.toString();
			str = str.substring(str.indexOf('[')+2,str.indexOf(']'));
			load = Double.parseDouble(str);
			//System.exit(0);
		} else {
		//abnormal...
		}

	} catch (IOException e) {
		e.printStackTrace();
	} catch (InterruptedException e) {
		e.printStackTrace();
	}
	System.out.println(load);
	//return load;

	  
	}
}


